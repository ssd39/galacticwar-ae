{"encodedAci":{"contract":{"functions":[{"arguments":[],"name":"init","payable":false,"returns":"GalacticWar.state","stateful":true},{"arguments":[],"name":"get_total_assets","payable":false,"returns":"int","stateful":false},{"arguments":[{"name":"data","type":"GalacticWar.asset_cordinates_map_internal"}],"name":"update_building_cordinates","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"addr","type":"address"}],"name":"get_buildings_data","payable":false,"returns":"GalacticWar.asset_cordinates_map_internal","stateful":false},{"arguments":[],"name":"get_my_data","payable":false,"returns":{"tuple":[{"list":["int"]},"int","GalacticWar.asset_cordinates_map_internal"]},"stateful":false},{"arguments":[],"name":"start_war","payable":false,"returns":"GalacticWar.war_data","stateful":true},{"arguments":[{"name":"id","type":"string"}],"name":"end_war","payable":true,"returns":{"oracle_query":["GalacticWar.war_oracle_question","GalacticWar.war_oracle_result"]},"stateful":true},{"arguments":[{"name":"sig","type":"signature"},{"name":"query_id","type":{"oracle_query":["GalacticWar.war_oracle_question","GalacticWar.war_oracle_result"]}},{"name":"res","type":"GalacticWar.war_oracle_result"}],"name":"respond_query","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"query_id","type":{"oracle_query":["GalacticWar.war_oracle_question","GalacticWar.war_oracle_result"]}}],"name":"claim_reward","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"destroyed_building","type":"int"}],"name":"claim_reward_x","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"sig","type":"signature"},{"name":"operator","type":"address"},{"name":"qfee","type":"int"},{"name":"ttl","type":"Chain.ttl"}],"name":"register_oracle","payable":false,"returns":{"oracle":["GalacticWar.war_oracle_question","GalacticWar.war_oracle_result"]},"stateful":true},{"arguments":[{"name":"sign","type":"signature"},{"name":"ttl","type":"Chain.ttl"}],"name":"extend_oracle","payable":true,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"token_uri","type":"string"},{"name":"token_price","type":"int"}],"name":"add_asset","payable":false,"returns":"address","stateful":true},{"arguments":[{"name":"asset_id","type":"int"},{"name":"to","type":"address"}],"name":"mint","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"start_game","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"asset_id","type":"int"}],"name":"get_asset_address","payable":false,"returns":"address","stateful":false},{"arguments":[],"name":"get_aureus_address","payable":false,"returns":"address","stateful":false},{"arguments":[],"name":"is_game_started","payable":false,"returns":"bool","stateful":false}],"kind":"contract_main","name":"GalacticWar","payable":false,"state":{"record":[{"name":"owner","type":"address"},{"name":"aureus","type":"Aureus"},{"name":"assets_count","type":"int"},{"name":"assets","type":"GalacticWar.assets_map"},{"name":"game_state","type":"GalacticWar.game_state_map"},{"name":"users","type":"GalacticWar.users_map"},{"name":"user_count","type":"int"},{"name":"asset_cordinates","type":"GalacticWar.asset_cordinates_map"},{"name":"war_state","type":"GalacticWar.war_state_map"},{"name":"war_result_oracle","type":{"option":[{"oracle":["GalacticWar.war_oracle_question","GalacticWar.war_oracle_result"]}]}}]},"type_defs":[{"name":"war","typedef":{"record":[{"name":"attacker","type":"address"},{"name":"defense","type":"address"},{"name":"is_finished","type":"bool"}]},"vars":[]},{"name":"war_oracle_question","typedef":{"record":[{"name":"game_id","type":"string"}]},"vars":[]},{"name":"war_oracle_result","typedef":{"record":[{"name":"game_id","type":"string"},{"name":"destroyed_building","type":"int"},{"name":"killed_troops","type":"int"}]},"vars":[]},{"name":"assets_map","typedef":{"map":["int","GameAsset"]},"vars":[]},{"name":"users_map","typedef":{"map":["int","address"]},"vars":[]},{"name":"game_state_map","typedef":{"map":["address","bool"]},"vars":[]},{"name":"asset_cordinates_map","typedef":{"map":["address",{"map":["int",{"list":[{"list":["int"]}]}]}]},"vars":[]},{"name":"asset_cordinates_map_internal","typedef":{"map":["int",{"list":[{"list":["int"]}]}]},"vars":[]},{"name":"asset_kv","typedef":{"tuple":["int",{"list":[{"list":["int"]}]}]},"vars":[]},{"name":"war_data","typedef":{"tuple":["string","address","GalacticWar.asset_cordinates_map_internal"]},"vars":[]},{"name":"war_state_map","typedef":{"map":["string","GalacticWar.war"]},"vars":[]},{"name":"asset_id_instance","typedef":{"tuple":["int","GameAsset"]},"vars":[]}]}},"externalEncodedAci":[{"namespace":{"name":"ListInternal","type_defs":[]}},{"namespace":{"name":"List","type_defs":[]}},{"namespace":{"name":"Option","type_defs":[]}},{"namespace":{"name":"String","type_defs":[]}},{"namespace":{"name":"Pair","type_defs":[]}},{"contract":{"functions":[{"arguments":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"token_uri","type":"string"},{"name":"token_pirce","type":"int"}],"name":"init","payable":false,"returns":"GameAsset.state","stateful":true},{"arguments":[],"name":"name","payable":false,"returns":"string","stateful":false},{"arguments":[],"name":"symbol","payable":false,"returns":"string","stateful":false},{"arguments":[],"name":"owner","payable":false,"returns":"address","stateful":false},{"arguments":[{"name":"token_owner","type":"address"}],"name":"balance_of","payable":false,"returns":"int","stateful":false},{"arguments":[{"name":"token_id","type":"int"}],"name":"owner_of","payable":false,"returns":{"option":["address"]},"stateful":false},{"arguments":[{"name":"token_id","type":"int"}],"name":"get_approved","payable":false,"returns":{"option":["address"]},"stateful":false},{"arguments":[{"name":"owner","type":"address"},{"name":"operator","type":"address"}],"name":"is_approved_for_all","payable":false,"returns":"bool","stateful":false},{"arguments":[{"name":"token_id","type":"int"}],"name":"get_token_uri","payable":false,"returns":"string","stateful":false},{"arguments":[],"name":"get_price","payable":false,"returns":"int","stateful":false},{"arguments":[{"name":"token_id","type":"int"},{"name":"uri","type":"string"}],"name":"set_token_uri","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"token_id","type":"int"},{"name":"to","type":"address"}],"name":"mint","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"token_id","type":"int"}],"name":"burn","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"token_id","type":"int"},{"name":"approved","type":"address"}],"name":"approve","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"token_id","type":"int"}],"name":"transfer_from","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"operator","type":"address"},{"name":"approved","type":"bool"}],"name":"set_approval_for_all","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"get_next_tokenid","payable":false,"returns":"int","stateful":false},{"arguments":[],"name":"lock_asset","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"unlock_asset","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"asset_lock_status","payable":false,"returns":"bool","stateful":false}],"kind":"contract_child","name":"GameAsset","payable":false,"state":{"record":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"owner","type":"address"},{"name":"map_owned_tokens_count","type":{"map":["address","int"]}},{"name":"map_token_owner","type":{"map":["int","address"]}},{"name":"map_token_approvals","type":{"map":["int","address"]}},{"name":"map_operator_approvals","type":{"map":["address",{"map":["address","bool"]}]}},{"name":"map_token_uris","type":{"map":["int","string"]}},{"name":"default_token_uri","type":"string"},{"name":"asset_lock","type":{"map":["address","bool"]}},{"name":"token_count","type":"int"},{"name":"pirce","type":"int"}]},"type_defs":[]}},{"contract":{"event":{"variant":[{"Transfer":["address","address","int"]},{"Allowance":["address","address","int"]},{"Burn":["address","int"]},{"Mint":["address","int"]},{"Swap":["address","int"]}]},"functions":[{"arguments":[],"name":"aex9_extensions","payable":false,"returns":{"list":["string"]},"stateful":false},{"arguments":[{"name":"name","type":"string"},{"name":"decimals","type":"int"},{"name":"symbol","type":"string"},{"name":"initial_owner_balance","type":{"option":["int"]}}],"name":"init","payable":false,"returns":"Aureus.state","stateful":false},{"arguments":[],"name":"meta_info","payable":false,"returns":"Aureus.meta_info","stateful":false},{"arguments":[],"name":"total_supply","payable":false,"returns":"int","stateful":false},{"arguments":[],"name":"owner","payable":false,"returns":"address","stateful":false},{"arguments":[],"name":"balances","payable":false,"returns":"Aureus.balances","stateful":false},{"arguments":[{"name":"account","type":"address"}],"name":"balance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[],"name":"swapped","payable":false,"returns":{"map":["address","int"]},"stateful":false},{"arguments":[],"name":"allowances","payable":false,"returns":"Aureus.allowances","stateful":false},{"arguments":[{"name":"allowance_accounts","type":"Aureus.allowance_accounts"}],"name":"allowance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"}],"name":"allowance_for_caller","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"},{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value","type":"int"}],"name":"create_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value_change","type":"int"}],"name":"change_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"}],"name":"reset_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"value","type":"int"}],"name":"burn","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"account","type":"address"},{"name":"value","type":"int"}],"name":"mint","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"swap","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"account","type":"address"}],"name":"check_swap","payable":false,"returns":"int","stateful":true}],"kind":"contract_child","name":"Aureus","payable":false,"state":{"record":[{"name":"owner","type":"address"},{"name":"total_supply","type":"int"},{"name":"balances","type":"Aureus.balances"},{"name":"meta_info","type":"Aureus.meta_info"},{"name":"allowances","type":"Aureus.allowances"},{"name":"swapped","type":{"map":["address","int"]}}]},"type_defs":[{"name":"meta_info","typedef":{"record":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"decimals","type":"int"}]},"vars":[]},{"name":"allowance_accounts","typedef":{"record":[{"name":"from_account","type":"address"},{"name":"for_account","type":"address"}]},"vars":[]},{"name":"balances","typedef":{"map":["address","int"]},"vars":[]},{"name":"allowances","typedef":{"map":["Aureus.allowance_accounts","int"]},"vars":[]}]}}],"interface":"\n\n\n\n\ncontract GameAsset =\n  record state = {name : string,symbol : string,owner : address,map_owned_tokens_count : map(address, int),map_token_owner : map(int, address),map_token_approvals : map(int, address),map_operator_approvals : map(address, map(address, bool)),map_token_uris : map(int, string),default_token_uri : string,asset_lock : map(address, bool),token_count : int,pirce : int}\n  stateful entrypoint init : (string, string, string, int) => GameAsset.state\n  entrypoint name : () => string\n  entrypoint symbol : () => string\n  entrypoint owner : () => address\n  entrypoint balance_of : (address) => int\n  entrypoint owner_of : (int) => option(address)\n  entrypoint get_approved : (int) => option(address)\n  entrypoint is_approved_for_all : (address, address) => bool\n  entrypoint get_token_uri : (int) => string\n  entrypoint get_price : () => int\n  stateful entrypoint set_token_uri : (int, string) => unit\n  stateful entrypoint mint : (int, address) => unit\n  stateful entrypoint burn : (int) => unit\n  stateful entrypoint approve : (int, address) => unit\n  stateful entrypoint transfer_from : (address, address, int) => unit\n  stateful entrypoint set_approval_for_all : (address, bool) => unit\n  entrypoint get_next_tokenid : () => int\n  stateful entrypoint lock_asset : () => unit\n  stateful entrypoint unlock_asset : () => unit\n  entrypoint asset_lock_status : () => bool\n\ncontract Aureus =\n  record state = {owner : address,total_supply : int,balances : Aureus.balances,meta_info : Aureus.meta_info,allowances : Aureus.allowances,swapped : map(address, int)}\n  datatype event = Transfer(address, address, int) | Allowance(address, address, int) | Burn(address, int) | Mint(address, int) | Swap(address, int)\n  record meta_info = {name : string,symbol : string,decimals : int}\n  record allowance_accounts = {from_account : address,for_account : address}\n  type balances = map(address, int)\n  type allowances = map(Aureus.allowance_accounts, int)\n  entrypoint aex9_extensions : () => list(string)\n  entrypoint init : (string, int, string, option(int)) => Aureus.state\n  entrypoint meta_info : () => Aureus.meta_info\n  entrypoint total_supply : () => int\n  entrypoint owner : () => address\n  entrypoint balances : () => Aureus.balances\n  entrypoint balance : (address) => option(int)\n  entrypoint swapped : () => map(address, int)\n  entrypoint allowances : () => Aureus.allowances\n  entrypoint allowance : (Aureus.allowance_accounts) => option(int)\n  entrypoint allowance_for_caller : (address) => option(int)\n  stateful entrypoint transfer_allowance : (address, address, int) => unit\n  stateful entrypoint create_allowance : (address, int) => unit\n  stateful entrypoint change_allowance : (address, int) => unit\n  stateful entrypoint reset_allowance : (address) => unit\n  stateful entrypoint transfer : (address, int) => unit\n  stateful entrypoint burn : (int) => unit\n  stateful entrypoint mint : (address, int) => unit\n  stateful entrypoint swap : () => unit\n  stateful entrypoint check_swap : (address) => int\n\nmain contract GalacticWar =\n  record state = {owner : address,aureus : Aureus,assets_count : int,assets : GalacticWar.assets_map,game_state : GalacticWar.game_state_map,users : GalacticWar.users_map,user_count : int,asset_cordinates : GalacticWar.asset_cordinates_map,war_state : GalacticWar.war_state_map,war_result_oracle : option(oracle(GalacticWar.war_oracle_question, GalacticWar.war_oracle_result))}\n  record war = {attacker : address,defense : address,is_finished : bool}\n  record war_oracle_question = {game_id : string}\n  record war_oracle_result = {game_id : string,destroyed_building : int,killed_troops : int}\n  type assets_map = map(int, GameAsset)\n  type users_map = map(int, address)\n  type game_state_map = map(address, bool)\n  type asset_cordinates_map = map(address, map(int, list(list(int))))\n  type asset_cordinates_map_internal = map(int, list(list(int)))\n  type asset_kv = (int * list(list(int)))\n  type war_data = (string * address * GalacticWar.asset_cordinates_map_internal)\n  type war_state_map = map(string, GalacticWar.war)\n  type asset_id_instance = (int * GameAsset)\n  stateful entrypoint init : () => GalacticWar.state\n  entrypoint get_total_assets : () => int\n  stateful entrypoint update_building_cordinates : (GalacticWar.asset_cordinates_map_internal) => unit\n  entrypoint get_buildings_data : (address) => GalacticWar.asset_cordinates_map_internal\n  entrypoint get_my_data : () => (list(int) * int * GalacticWar.asset_cordinates_map_internal)\n  stateful entrypoint start_war : () => GalacticWar.war_data\n  payable stateful entrypoint end_war : (string) => oracle_query(GalacticWar.war_oracle_question, GalacticWar.war_oracle_result)\n  stateful entrypoint respond_query : (signature, oracle_query(GalacticWar.war_oracle_question, GalacticWar.war_oracle_result), GalacticWar.war_oracle_result) => unit\n  stateful entrypoint claim_reward : (oracle_query(GalacticWar.war_oracle_question, GalacticWar.war_oracle_result)) => unit\n  stateful entrypoint claim_reward_x : (int) => unit\n  stateful entrypoint register_oracle : (signature, address, int, Chain.ttl) => oracle(GalacticWar.war_oracle_question, GalacticWar.war_oracle_result)\n  payable stateful entrypoint extend_oracle : (signature, Chain.ttl) => unit\n  stateful entrypoint add_asset : (string, string, string, int) => address\n  stateful entrypoint mint : (int, address) => unit\n  stateful entrypoint start_game : () => unit\n  entrypoint get_asset_address : (int) => address\n  entrypoint get_aureus_address : () => address\n  entrypoint is_game_started : () => bool\n"}